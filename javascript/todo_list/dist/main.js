!function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);class s{constructor(e,t="",i=null,r=1){if(!s.validTitle(e))throw new Error(`Title: '${e}' must be a non-empty string.`);if(!s.titleAvailable(e))throw new Error(`Title: '${e}' is already in use.`);if(this._title=e,!s.validDescription(t))throw new Error(`Description: '${t}' must be a string.`);if(this._description=t,null===i)this._dueDate=null;else{if(!s.validDate(i))throw new Error(`Date: '${i}' must be a Date object or null.`);if(!s.dateInRange(i))throw new Error(`Due Date: '${i}' must fall on or past current Date: '${Date(s.currentDate)}.'`);this._dueDate=i}if(!s.validPriority(r))throw new Error(`Priority: '${r}' must be an integer.`);if(!s.priorityInRange(r))throw s.priorityRangeError;this._priority=r,this._done=!1,s.list.push(this)}static validInstance(e){return e instanceof s}static listed(e){return s.list.indexOf(e)>=0}static validTitle(e){return"string"==typeof e&&e.length>0}static titleAvailable(e){for(let t in s.list)if(s.list[t].title===e)return!1;return!0}static validDescription(e){return"string"==typeof e}static validDate(e){return e instanceof Date&&!isNaN(e.getTime())}static dateInRange(e){var t=new Date(Date.now());return e.getYear()>t.getYear()||e.getYear()==t.getYear()&&(e.getMonth()>t.getMonth()||e.getMonth()==t.getMonth()&&e.getDate()>=t.getDate())}static validPriority(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static priorityInRange(e){return!(e<s.MIN_PRIORITY||e>s.MAX_PRIORITY)}static delete(e){if(!s.validInstance(e))throw new Error(`Object: '${e}' is not a valid instance of Todo class.`);if(!s.listed(e))throw new Error(`Todo: '${e._title}' cannot be found in master list.`);s.list.splice(s.list.indexOf(e),1)}static relist(e){if(!s.validInstance(e))throw new Error(`Object: '${e}' is not a valid instance of Todo class.`);if(s.listed(listed))throw new Error(`Todo: '${e._title}' is already in master list.`);s.list.push(e)}get title(){return this._title}set title(e){if(!s.validTitle(e))throw new Error(`Title: '${e}' must be a non-empty string.`);if(!s.titleAvailable(e))throw new Error(`Title: '${e}' is already in use.`);this._title=e}get description(){return this._description}set description(e){if(!s.validDescription(e))throw new Error(`Description: '${e}' must be a string.`);this._description=e}get dueDate(){return this._dueDate}set dueDate(e){if(null===e)this._dueDate=null;else{if(!s.validDate(e))throw new Error(`Date: '${e}' must be a Date object or null.`);if(!s.dateInRange(e))throw new Error(`Due Date: '${e}' must fall on or past current Date: '${Date(s.currentDate)}.'`);this._dueDate=e}}get priority(){return this._priority}set priority(e){if(!s.validPriority(e))throw new Error(`Priority: '${e}' must be an integer.`);if(!s.priorityInRange(e))throw s.priorityRangeError;this._priority=e}check(){if(!0===this._done)throw new Error(`Todo: '${this._title}' has already been checked off.`);this._done=!0}uncheck(){if(!1===this._done)throw new Error(`Todo: '${this._title}' has not been checked.`);this._done=!1}checked(){return this._done}unchecked(){return!this._done}hasDate(){return null!=this._dueDate}}s.list=[],s.MAX_PRIORITY=5,s.MIN_PRIORITY=1,s.priorityRangeError=new Error(`Priority must be within range ${s.MIN_PRIORITY} to ${s.MAX_PRIORITY}.`);class r{constructor(e,t=[]){if(!r.validName(e))throw new Error(`Name: '${e}' must be a non-empty string.`);if(!r.uniqueName(e))throw new Error(`Name: '${e}' is already in use.`);if(this._name=e,!r.validTodoList(t))throw new Error(`Todo List: '${t}' must be an array of valid Todo objects.`);if(!r.uniqueTodoList(t))throw new Error(`Todo List: '${t}' must contain only unassigned unique Todo objects.`);this._todoList=t,r.list.push(this)}static validInstance(e){return e instanceof r}static listed(e){return r.list.indexOf(e)>=0}static validName(e){return"string"==typeof e&&e.length>0}static uniqueName(e){for(let t in r.list)if(r.list[t]._name==e)return!1;return!0}static validTodoList(e){for(let t in e)if(!s.validInstance(e[t]))return!1;return!0}static uniqueTodoList(e){var t=[];for(let i in e){let s=e[i];if(t.includes(s))return!1;if(r.listedInProject(s))return!1;t.push(s)}return!0}static listedInProject(e){for(let t in r.list)if(r.list[t]._todoList.includes(e))return!0;return!1}static get(e){for(let t in r.list)if(r.list[t].name==e)return r.list[t];throw new Error(`No Project listed with name: '${e}'.`)}static delete(e){if(!r.validInstance(e))throw new Error(`Object: '${e}' is not a valid instance of Project Class.`);if(!r.listed(e))throw new Error(`Project: '${e._name}' cannot be found in master list.`);e.populated()?(e.deleteAll(),r.list.splice(r.list.indexOf(e),1)):r.list.splice(r.list.indexOf(e),1)}static relist(e){if(!r.validInstance(e))throw new Error(`Object: '${e}' is not a valid instance of Project Class.`);if(r.listed(e))throw new Error(`Project: '${e._name}' is already in master list.`);r.list.push(e)}static deleteAll(){if(0==r.list.length)throw new Error("Project list is empty.");for(let e in r.list)r.list[e].populated()&&r.list[e].deleteAll();r.list=[]}get name(){return this._name}set name(e){if(!r.validName(e))throw new Error(`Name: '${e}' must be a non-empty string.`);if(!r.uniqueName(e))throw new Error(`Name: '${e}' is already in use.`);this._name=e}get todoList(){return this._todoList}set todoList(e){var t=this._todoList;if(this._todoList=[],!r.validTodoList(e))throw this._todoList=t,new Error(`Todo List: '${e}' must be an array of valid Todos.`);if(!r.uniqueTodoList(e))throw this._todoList=t,new Error(`Todo List: '${e}' must contain only unassigned unique Todos.`);this._todoList=e}get(e){if(this.empty())throw new Error(`Project: '${this._name}' has no listed Todos to get.`);if(this.listed(e))return this._todoList.find(t=>t.title==e);throw new Error(`Todo: '${e}' is not listed in Project: '${this._name}'.`)}add(e){if(!s.validInstance(e))throw new Error(`Object: '${e.title}' is not a valid instance of Todo class.`);if(r.listedInProject(e))throw new Error(`Todo: '${e.title}' is already listed in a Project.`);this._todoList.push(e)}delete(e){if(this.empty())throw new Error(`Project: '${this._name}' has no listed Todos to delete.`);if(!this.listed(e))throw new Error(`Todo: '${e}' is not listed in Project '${this._name}'.`);var t=this._todoList.find(t=>t.title==e);s.delete(t),this._todoList.splice(this._todoList.indexOf(t),1)}deleteAll(){if(this.empty())throw new Error(`Project: '${this._name}' has no listed Todos to delete.`);for(;this._todoList.length>0;)s.delete(this._todoList[0].title);this._todoList=[]}uncheckAll(){if(this.empty())throw new Error(`Project: '${this._name}' has no listed Todos to uncheck.`);let e=!0;for(let t in this._todoList)this._todoList[t].checked()&&(e=!1,this._todoList[t].uncheck());if(e)throw new Error(`Project: '${this._name}' has already been unchecked.`)}finish(){if(this.empty())throw new Error(`Project: '${this._name}' has no listed Todos to finish.`);let e=!0;for(let t in this._todoList)this._todoList[t].unchecked()&&(e=!1,this._todoList[t].check());if(e)throw new Error(`Project: '${this._name}' has already been finished.`)}finished(){if(this.empty())throw new Error(`Project: '${this._name}' has no listed Todos to finish.`);for(let e in this._todoList)if(this._todoList[e].unchecked())return!1;return!0}unfinished(){return!this.finished()}empty(){return 0==this._todoList.length}populated(){return!this.empty()}listed(e){return this._todoList.some(t=>t.title==e)}}r.list=[];class n{constructor(e){if(e)t=e;else{for(var t="New Project ",i=1;!r.uniqueName(t+i);)i++;t+=i}try{this.project=new r(t)}catch(e){return d.updateMessage(e.message,"error"),-1}try{this.display=new d(this)}catch(e){return d.updateMessage(e.message,"error"),r.delete(this.project),-1}this.sortStates={},n.list[t]=this,n.saveData(),d.updateMessage(`Project: '${t}' Created`)}static verifyProject(e){if(r.validInstance(e)){if(r.listed(e))return!0;throw new Error(`Project: '${e}' is delisted and awaiting dereferencing.`)}throw new Error(`Object: '${e}' is not a valid instance of the Project class.`)}static delete(e){var t=n.list[e];if(null==t)return d.updateMessage(`No Struct listed with name: '${e}'`,"error"),-1;try{r.delete(t.project)}catch(e){return d.updateMessage(e.message,"error"),-1}try{d.delete(t.display)}catch(e){return d.updateMessage(e.message,"error"),r.relist(t.project),-1}delete n.list[e],n.saveData(),d.updateMessage(`Project: '${e}' Deleted`)}static deleteAll(){for(let e in n.list)if(-1==n.delete(e))return-1;d.updateMessage("All Projects Deleted")}static applySort(){var e=Object.keys(n.list);"ascending"==n.sortStates.finished?e.sort((e,t)=>{let i=n.list[e],s=n.list[t];return i.display.finished()&&s.display.unfinished()?-1:i.display.unfinished()&&s.display.finished()?1:"ascending"==n.sortStates.name?e>t?1:e<t?-1:0:"descending"==n.sortStates.name?e<t?1:e>t?-1:0:0}):"descending"==n.sortStates.finished?e.sort((e,t)=>{let i=n.list[e],s=n.list[t];return i.display.finished()&&s.display.unfinished()?1:i.display.unfinished()&&s.display.finished()?-1:"ascending"==n.sortStates.name?e>t?1:e<t?-1:0:"descending"==n.sortStates.name?e<t?1:e>t?-1:0:0}):("ascending"==n.sortStates.name&&e.sort(),"descending"==n.sortStates.name&&e.sort((e,t)=>e<t?1:e>t?-1:0)),d.setFinishedSort(this.sortStates.finished),d.setNameSort(this.sortStates.name);for(let e in n.list)d.remove(n.list[e].display);for(let t in e)d.replace(n.list[e[t]].display)}static sortFinished(){"ascending"==n.sortStates.finished?n.sortStates.finished="descending":"descending"==n.sortStates.finished?n.sortStates.finished="none":n.sortStates.finished="ascending",n.applySort(),n.saveData()}static sortName(){"ascending"==n.sortStates.name?n.sortStates.name="descending":"descending"==n.sortStates.name?n.sortStates.name="none":n.sortStates.name="ascending",n.applySort(),n.saveData()}changeName(e){var t=this.project.name;try{this.project.name=e}catch(e){return d.updateMessage(e.message,"error"),this.display.name=t,-1}try{this.display.name=e}catch(e){return d.updateMessage(e.message,"error"),this.project.name=t,this.display.name=t,-1}e in n.list?(d.updateMessage(`Name: '${e}' already exists in the master Struct list.`),this.project.name=t,this.display.name=t):(n.list[e]=this,e!=t&&delete n.list[t]),n.saveData(),d.updateMessage(`Project: '${t}' renamed to '${e}'`)}updateStatus(){this.project.empty()||(this.project.finished()&&this.display.unfinished()&&(this.display.finish(),d.updateMessage(`Project: '${this.project.name}' finished!`,"congrat")),this.project.unfinished()&&this.display.finished()&&this.display.unfinish())}createTodo(e,t="",i=null,r=1){if(e)a=e;else{for(var a=this.project.name+" Task ",o=1;!s.titleAvailable(a+o);)o++;a+=o}try{var l=new s(a,t,i,r)}catch(e){return d.updateMessage(e.message,"error"),-1}try{this.project.add(l)}catch(e){return d.updateMessage(e.message,"error"),s.delete(l),-1}try{this.display.list(l)}catch(e){return d.updateMessage(e.message,"error"),s.delete(l),this.project.delete(l.title),-1}this.updateStatus(),this.applySort(),n.saveData(),d.updateMessage(`Todo: '${l.title}' added to Project: '${this.project.name}'`)}changeTitle(e,t){try{var i=this.project.get(e)}catch(e){return d.updateMessage(e.message,"error"),-1}try{i.title=t}catch(t){return d.updateMessage(t.message,"error"),this.display.changeTitle(e,e),-1}try{this.display.changeTitle(e,t)}catch(t){return d.updateMessage(t.message,"error"),i.title=e,this.display.changeTitle(e,e),-1}this.applySort(),n.saveData(),d.updateMessage(`Todo: '${e}' retitled to '${t}'`)}changeDescription(e,t){try{var i=this.project.get(e)}catch(e){return d.updateMessage(e.message,"error"),-1}var s=i.description;try{i.description=t}catch(e){return d.updateMessage(e.message,"error"),this.display.changeDescription(s),-1}try{this.display.changeDescription(e,t)}catch(e){return d.updateMessage(e.message,"error"),i.description=s,this.display.changeDescription(s),-1}this.applySort(),n.saveData()}changeDueDate(e,t){try{var i=this.project.get(e)}catch(e){return d.updateMessage(e.message,"error"),-1}var s=i.dueDate;try{i.dueDate=t}catch(t){return d.updateMessage(t.message,"error"),this.display.changeDueDate(e,s),-1}try{this.display.changeDueDate(e,t)}catch(e){return d.updateMessage(e.message,"error"),i.dueDate=t,this.display.changeDueDate(s),-1}this.applySort(),n.saveData()}changePriority(e,t){try{var i=this.project.get(e)}catch(e){return d.updateMessage(e.message,"error"),-1}var s=i.priority;try{i.priority=t}catch(t){return d.updateMessage(t.message,"error"),this.display.changePriority(e,i.priority),-1}try{i.priority=t,this.display.changePriority(e,t)}catch(t){return d.updateMessage(t.message,"error"),i.priority=s,this.display.changePriority(e,i.priority),-1}this.applySort(),n.saveData()}check(e){try{var t=this.project.get(e)}catch(e){return d.updateMessage(e.message,"error"),-1}try{t.check()}catch(e){return d.updateMessage(e.message,"error"),-1}try{this.display.unchecked(e)&&this.display.check(e)}catch(e){return d.updateMessage(e.message,"error"),-1}this.updateStatus(),this.applySort(),n.saveData()}uncheck(e){try{var t=this.project.get(e)}catch(e){return d.updateMessage(e.message,"error"),-1}try{t.uncheck()}catch(e){return d.updateMessage(e.message,"error"),-1}try{this.display.checked(e)&&this.display.uncheck(e)}catch(e){return d.updateMessage(e.message,"error"),-1}this.updateStatus(),this.applySort(),n.saveData()}toggle(e){this.project.get(e).unchecked()?this.check(e):this.uncheck(e),this.applySort(),n.saveData()}toggleAll(){if(this.project.populated()){var e=this.project.finished();for(let t in this.project.todoList){let i=this.project.todoList[t];e?i.checked()&&this.uncheck(i.title):i.unchecked()&&this.check(i.title)}}n.saveData(),this.display.finished()&&d.updateMessage(`Project: '${this.project.name}' finished!`,"congrat")}delete(e){try{var t=this.project.get(e)}catch(e){return d.updateMessage(e.message,"error"),-1}try{this.project.delete(e)}catch(e){return d.updateMessage(e.message,"error"),-1}try{this.display.delete(e)}catch(e){return d.updateMessage(e.message,"error"),s.relist(t),-1}this.updateStatus(),this.applySort(),n.saveData(),d.updateMessage(`Todo: '${e}' deleted from Project: '${this.project.name}'`)}deleteAll(){var e=Array.from(this.project.todoList);for(let t in e){let i=e[t];this.delete(i.title)}d.updateMessage(`Project: '${this.project.name}' todo list cleared`)}applySort(){var e=Array.from(this.project.todoList);e.sort((e,t)=>(function(e,t,i){if("ascending"==i.dueDate){if(e.hasDate()&&!t.hasDate())return-1;if(!e.hasDate()&&t.hasDate())return 1;if(e.hasDate()||t.hasDate()){if(e.dueDate.getTime()<t.dueDate.getTime())return-1;if(e.dueDate.getTime()>t.dueDate.getTime())return 1;l(e,t,i)}else l(e,t,i)}else{if("descending"!=i.dueDate)return l(e,t,i);if(!e.hasDate()&&t.hasDate())return-1;if(e.hasDate()&&!t.hasDate())return 1;if(e.hasDate()||t.hasDate()){if(e.dueDate.getTime()>t.dueDate.getTime())return-1;if(e.dueDate.getTime()<t.dueDate.getTime())return 1;l(e,t,i)}else l(e,t,i)}})(e,t,this.sortStates)),this.display.setCheckedSort(this.sortStates.checked),this.display.setPrioritySort(this.sortStates.priority),this.display.setTitleSort(this.sortStates.title),this.display.setDueDateSort(this.sortStates.dueDate);for(let t in e){let i=this.display.get(e[t].title);this.display.remove(i)}for(let t in e){let i=this.display.get(e[t].title);this.display.replace(i)}}sortChecked(){"ascending"==this.sortStates.checked?this.sortStates.checked="descending":"descending"==this.sortStates.checked?this.sortStates.checked="none":this.sortStates.checked="ascending",this.applySort(),n.saveData()}sortPriority(){"ascending"==this.sortStates.priority?this.sortStates.priority="descending":"descending"==this.sortStates.priority?this.sortStates.priority="none":this.sortStates.priority="ascending",this.applySort(),n.saveData()}sortTitle(){"ascending"==this.sortStates.title?this.sortStates.title="descending":"descending"==this.sortStates.title?this.sortStates.title="none":this.sortStates.title="ascending",this.applySort(),n.saveData()}sortDueDate(){"ascending"==this.sortStates.dueDate?this.sortStates.dueDate="descending":"descending"==this.sortStates.dueDate?this.sortStates.dueDate="none":this.sortStates.dueDate="ascending",this.applySort(),n.saveData()}static saveData(){var e={};for(let t in n.list){let i=n.list[t];e[t]={},e[t].sortStates=i.sortStates,e[t].finished=i.display.finished(),e[t].todoList=[];for(let s in i.project.todoList)e[t].todoList.push(i.project.todoList[s])}window.localStorage.setItem("project_list",JSON.stringify(e)),window.localStorage.setItem("sort_states",JSON.stringify(n.sortStates))}static loadData(){n.sortStates=JSON.parse(window.localStorage.getItem("sort_states"));var e=JSON.parse(window.localStorage.getItem("project_list"));for(let t in e){let i=new n(t);i.sortStates=e[t].sortStates,e[t].finished&&i.display.finish();let s=e[t].todoList;for(let e in s){let t=s[e],r=null==t._dueDate?null:new Date(t._dueDate);i.createTodo(t._title,t._description,r,t._priority),t._done&&i.check(t._title)}i.applySort()}n.applySort(),n.saveData(),Object.keys(n.list).length>0?d.updateMessage("Welcome back!"):d.updateMessage("Welcome!")}static clearData(){window.localStorage.clear(),n.list={}}static logAllLists(){console.log(n.list),console.log(d.list),console.log(r.list),console.log(s.list)}}function a(e,t,i){return"ascending"==i.title?e.title<t.title?-1:e.title>t.title?1:0:"descending"==i.title?e.title>t.title?-1:e.title<t.title?1:0:0}function o(e,t,i){return"ascending"==i.checked?e.checked()&&t.unchecked()?-1:e.unchecked()&&t.checked()?1:a(e,t,i):"descending"==i.checked?e.unchecked()&&t.checked()?-1:e.checked()&&t.unchecked()?1:a(e,t,i):a(e,t,i)}function l(e,t,i){return"ascending"==i.priority?e.priority<t.priority?-1:e.priority>t.priority?1:o(e,t,i):"descending"==i.priority?e.priority>t.priority?-1:e.priority<t.priority?1:o(e,t,i):o(e,t,i)}n.list={},n.sortStates={},n.saving=!1,n.loading=!1,n.todoError=new Error("TODO: Interstruct Module");class d{constructor(e){d.enforceInitialize(),this._interstruct=e,this._name=e.project.name,this._projectListing=document.createElement("div"),this._projectListing.className="project";var t=document.createElement("div");t.className="project_control";var i=document.createElement("fieldset");i.className="info_panel",this._projectCheckbox=document.createElement("input"),this._projectCheckbox.className="project_checkbox",this._projectCheckbox.type="checkbox",this._projectCheckbox.checked=!1,this._projectCheckbox.addEventListener("click",this.handleProjectCheckboxChange.bind(this)),this._projectName=document.createElement("input"),this._projectName.className="project_name",this._projectName.value=e.project.name,this._projectName.addEventListener("change",this.handleNameChange.bind(this));var s=document.createElement("button");s.className="delete",s.innerText="Delete",s.addEventListener("click",this.handleProjectDeleteClick.bind(this));var r=document.createElement("fieldset");r.className="todo_list_panel";var n=document.createElement("button");n.className="new",n.innerText="Add Task",n.addEventListener("click",this.handleNewTodoClick.bind(this));var a=document.createElement("button");a.className="expand_all",a.innerText="Expand All",a.addEventListener("click",this.handleExpandAllClick.bind(this));var o=document.createElement("button");o.className="collapse_all",o.innerText="Collapse All",o.addEventListener("click",this.handleCollapseAllClick.bind(this));var l=document.createElement("button");l.className="delete_all",l.innerText="Clear",l.addEventListener("click",this.handleDeleteAllClick.bind(this)),this._todoListSortBar=document.createElement("div"),this._todoListSortBar.className="sort_todo_list";var c=document.createElement("button");c.className="sort_checked",c.innerHTML="&#10003;",c.addEventListener("click",this.handleSortCheckedClick.bind(this));var h=document.createElement("button");h.className="sort_priority",h.innerText="#",h.addEventListener("click",this.handleSortPriorityClick.bind(this));var p=document.createElement("button");p.className="sort_title",p.innerText="Title",p.addEventListener("click",this.handleSortTitleClick.bind(this));var u=document.createElement("button");u.className="sort_due_date",u.innerText="Due Date",u.addEventListener("click",this.handleSortDueDateClick.bind(this)),t.appendChild(i),t.appendChild(r),i.appendChild(this._projectCheckbox),i.appendChild(this._projectName),i.appendChild(s),r.appendChild(n),r.appendChild(a),r.appendChild(o),r.appendChild(l),r.appendChild(this._todoListSortBar),this._todoListSortBar.appendChild(c),this._todoListSortBar.appendChild(h),this._todoListSortBar.appendChild(p),this._todoListSortBar.appendChild(u),this._todoList=document.createElement("div"),this._todoList.className="todo_list",this._listings={},this._projectListing.appendChild(t),this._projectListing.appendChild(this._todoList),d.projectList.appendChild(this._projectListing),d.list[this._name]=this}static initialize(){if(d.main=document.querySelector("#display"),null===d.main)throw d.rootElementNotFoundError;d.projectControl=document.createElement("header"),d.projectControl.id="project_list_control",d.main.appendChild(d.projectControl),d.messageHeadline=document.createElement("h2"),d.messageHeadline.id="message",d.messageHeadline.className="notice",d.messageHeadline.innerText="Welcome";var e=document.createElement("button");e.className="create",e.innerText="Create New Project",e.addEventListener("click",d.handleCreateClick);var t=document.createElement("button");t.className="delete_all",t.innerText="Delete All",t.addEventListener("click",d.handleDeleteAllClick),d.projectSortBar=document.createElement("div"),d.projectSortBar.id="sort_projects";var i=document.createElement("button");i.className="sort_finished",i.innerHTML="&#10003;",i.addEventListener("click",d.handleSortFinishedClick);var s=document.createElement("button");s.className="sort_name",s.innerText="Name",s.addEventListener("click",d.handleSortNameClick),d.projectControl.appendChild(d.messageHeadline),d.projectControl.appendChild(e),d.projectControl.appendChild(t),d.projectSortBar.appendChild(i),d.projectSortBar.appendChild(s),d.projectControl.appendChild(d.projectSortBar),d.projectList=document.createElement("section"),d.projectList.id="project_list",d.main.appendChild(d.projectList),d._initialized=!0}static enforceInitialize(){if(!d._initialized)throw d.uninitializedError}static validInstance(e){return e instanceof d}static listEmpty(){return 0==d.list.length}static listed(e){d.enforceInitialize();for(let t in d.list)if(d.list[t]===e)return!0;return!1}static DOMlisted(e){d.enforceInitialize();var t=d.projectList.children;for(let i=0;i<t.length;i++)if(t[i]==e._projectListing)return!0;return!1}static delete(e){if(!d.validInstance(e))throw new Error(`Object: '${e}' is not a valid instance of the Display class.`);if(d.listEmpty())throw d.listEmptyError;if(!d.listed(e))throw new Error(`Display: '${e.name}' is not currently listed.`);d.projectList.removeChild(e._projectListing),delete d.list[e.name]}static remove(e){if(!d.validInstance(e))throw new Error(`Object: '${e}' is not a valid instance of the Display class.`);if(d.listEmpty())throw d.listEmptyError;if(!d.listed(e))throw new Error(`Display: '${e.name}' is not currently listed.`);if(!d.DOMlisted(e))throw new Error(`Display: '${e.name}' is not currently being displayed.`);d.projectList.removeChild(e._projectListing)}static replace(e){if(!d.validInstance(e))throw new Error(`Object: '${e}' is not a valid instance of the Display class.`);if(!d.listed(e))throw new Error(`Display: '${e.name}' is not currently listed.`);if(d.DOMlisted(e))throw new Error(`Display: '${e.name}' is already being displayed.`);d.projectList.appendChild(e._projectListing)}static updateMessage(e,t="notice"){d.messageHeadline.className="",d.messageHeadline.offsetWidth,d.messageHeadline.innerText=e,d.messageHeadline.className="congrat"===t?"congrat":"error"===t?"error":"notice"}static setFinishedSort(e){var t=d.projectSortBar.querySelector("button.sort_finished");t.className="ascending"==e?"sort_finished ascending":"descending"==e?"sort_finished descending":"sort_finished"}static setNameSort(e){var t=d.projectSortBar.querySelector("button.sort_name");t.className="ascending"==e?"sort_name ascending":"descending"==e?"sort_name descending":"sort_name"}static handleCreateClick(){d.handlingEvent||(d.handlingEvent=!0,new n,d.handlingEvent=!1)}static handleDeleteAllClick(){d.handlingEvent||(d.handlingEvent=!0,n.deleteAll(),d.handlingEvent=!1)}static handleSortFinishedClick(){d.handlingEvent||(d.handlingEvent=!0,n.sortFinished(),d.handlingEvent=!1)}static handleSortNameClick(){d.handlingEvent||(d.handlingEvent=!0,n.sortName(),d.handlingEvent=!1)}get name(){return this._name}set name(e){var t=this._name;try{this._name=e,this._projectName.value=e}catch(e){throw this._projectName.value=t,this._name=t,new Error(e.message)}e!=t&&(d.list[e]=this,delete d.list[t])}finished(){return this._projectCheckbox.checked}unfinished(){return!this.finished()}finish(){if(this.finished())throw new Error(`Project: '${this.name}' is already finished.`);this._projectCheckbox.checked=!0}unfinish(){if(this.unfinished())throw new Error(`Project: '${this.name}' has not been finished.`);this._projectCheckbox.checked=!1}listed(e){return e in this._listings}DOMlisted(e){var t=this._todoList.children;for(let i=0;i<t.length;i++)if(t[i]==e)return!0;return!1}list(e){if(this.listed(e.title))throw new Error(`Todo: '${e.title}' is already listed in the project display.`);var t=document.createElement("fieldset");t.className="todo",t.id=e.title;var i=document.createElement("input");i.className="checkbox",i.type="checkbox",i.checked=e.checked(),i.addEventListener("change",this.handleTodoCheckboxChange.bind(this,t));var s=document.createElement("input");s.className="priority",s.type="number",s.min=1,s.max=5,s.value=e.priority,s.addEventListener("change",this.handleTodoPriorityChange.bind(this,t));var r=document.createElement("input");r.className="title",r.value=e.title,r.addEventListener("change",this.handleTodoTitleChange.bind(this,t));var n=document.createElement("input");n.className="due_date",n.type="date",e.hasDate()&&(n.valueAsDate=e.dueDate),n.addEventListener("change",this.handleTodoDueDateChange.bind(this,t));var a=document.createElement("button");a.className="delete",a.innerText="X",a.addEventListener("click",this.handleTodoDeleteClick.bind(this,t));var o=document.createElement("div");o.className="collapsed collapsable";var l=document.createElement("textarea");l.className="description",l.value=e.description,l.addEventListener("change",this.handleTodoDescriptionChange.bind(this,t));var d=document.createElement("button");d.className="dropdown",d.innerText="expand",d.addEventListener("click",this.handleTodoDropdownClick.bind(this,t)),t.appendChild(i),t.appendChild(s),t.appendChild(r),t.appendChild(n),t.appendChild(a),t.appendChild(o),o.appendChild(l),o.appendChild(d),this._todoList.appendChild(t),this._listings[e.title]=t}get(e){if(!this.listed(e))throw new Error(`Todo: '${e}' is not listed in the project display.`);return this._listings[e]}remove(e){var t=e.querySelector("input.title").value;if(!this.listed(t))throw new Error(`Todo: '${t}' is not listed in the Project display.`);if(!this.DOMlisted(e))throw new Error(`Display: '${t} is not currently being displayed.`);this._todoList.removeChild(e)}replace(e){var t=e.querySelector("input.title").value;if(!this.listed(t))throw new Error(`Todo: '${t}' is not listed in the Project display.`);if(this.DOMlisted(e))throw new Error(`Display: '${t} is already being displayed.`);this._todoList.appendChild(e)}checked(e){return this._listings[e].querySelector(".checkbox").checked}unchecked(e){return!this._listings[e].querySelector(".checkbox").checked}check(e){if(!this.listed(e))throw new Error(`Todo: '${e}' is not listed in the project display.`);if(this.checked(e))throw new Error(`Todo: '${e}' is already checked off.`);this._listings[e].querySelector(".checkbox").checked=!0}uncheck(e){if(!this.listed(e))throw new Error(`Todo: '${e}' is not listed in the project display.`);if(this.unchecked(e))throw new Error(`Todo: '${e}' is not checked off.`);this._listings[e].querySelector(".checkbox").checked=!1}changePriority(e,t){if(!this.listed(e))throw new Error(`Todo: '${e}' is not listed in the project display.`);this._listings[e].querySelector(".priority").value=t}changeTitle(e,t){if(!this.listed(e))throw new Error(`Todo: '${e}' is not listed in the project display.`);var i=this._listings[e],s=i.querySelector(".title");i.id=t,s.value=t,this._listings[t]=i,e!=t&&delete this._listings[e]}changeDueDate(e,t){if(!this.listed(e))throw new Error(`Todo: '${e}' is not listed in the project display.`);this._listings[e].querySelector(".due_date").valueAsDate=t}changeDescription(e,t){if(!this.listed(e))throw new Error(`Todo: '${e}' is not listed in the project display.`);this._listings[e].querySelector(".description").value=t}delete(e){if(!this.listed(e))throw new Error(`Todo: '${e}' is not listed in the project display.`);var t=this._listings[e];this._todoList.removeChild(t),delete this._listings[e]}toggleCollapsable(e){if(!this.listed(e))throw new Error(`Todo: '${e}' is not listed in the project display.`);this.collapsed(e)?this.expand(e):this.collapse(e)}collapsed(e){return"collapsed collapsable"==this._listings[e].querySelector(".collapsable").className}expand(e){var t=this._listings[e].querySelector(".collapsable"),i=t.querySelector(".dropdown");t.className="expanded collapsable",i.innerText="collapse"}collapse(e){var t=this._listings[e].querySelector(".collapsable"),i=t.querySelector(".dropdown");t.className="collapsed collapsable",i.innerText="expand"}setCheckedSort(e){var t=this._todoListSortBar.querySelector("button.sort_checked");t.className="ascending"==e?"sort_checked ascending":"descending"==e?"sort_checked descending":"sort_checked"}setPrioritySort(e){var t=this._todoListSortBar.querySelector("button.sort_priority");t.className="ascending"==e?"sort_priority ascending":"descending"==e?"sort_priority descending":"sort_priority"}setTitleSort(e){var t=this._todoListSortBar.querySelector("button.sort_title");t.className="ascending"==e?"sort_title ascending":"descending"==e?"sort_title descending":"sort_title"}setDueDateSort(e){var t=this._todoListSortBar.querySelector("button.sort_due_date");t.className="ascending"==e?"sort_due_date ascending":"descending"==e?"sort_due_date descending":"sort_due_date"}handleProjectCheckboxChange(e){d.handlingEvent||(d.handlingEvent=!0,this._interstruct.toggleAll(),d.handlingEvent=!1)}handleNameChange(e){d.handlingEvent||(d.handlingEvent=!0,this._interstruct.changeName(this._projectName.value),d.handlingEvent=!1)}handleProjectDeleteClick(e){d.handlingEvent||(d.handlingEvent=!0,n.delete(this._interstruct.project.name),d.handlingEvent=!1)}handleNewTodoClick(e){d.handlingEvent||(d.handlingEvent=!0,this._interstruct.createTodo(),d.handlingEvent=!1)}handleCollapseAllClick(e){if(!d.handlingEvent){d.handlingEvent=!0;for(let e in this._listings)this.collapse(e);d.handlingEvent=!1}}handleExpandAllClick(e){if(!d.handlingEvent){d.handlingEvent=!0;for(let e in this._listings)this.expand(e);d.handlingEvent=!1}}handleDeleteAllClick(e){d.handlingEvent||(d.handlingEvent=!0,this._interstruct.deleteAll(),d.handlingEvent=!1)}handleSortCheckedClick(e){d.handlingEvent||(d.handlingEvent=!0,this._interstruct.sortChecked(),d.handlingEvent=!1)}handleSortPriorityClick(e){d.handlingEvent||(d.handlingEvent=!0,this._interstruct.sortPriority(),d.handlingEvent=!1)}handleSortTitleClick(e){d.handlingEvent||(d.handlingEvent=!0,this._interstruct.sortTitle(),d.handlingEvent=!1)}handleSortDueDateClick(e){d.handlingEvent||(d.handlingEvent=!0,this._interstruct.sortDueDate(),d.handlingEvent=!1)}handleTodoCheckboxChange(e){d.handlingEvent||(d.handlingEvent=!0,this._interstruct.toggle(e.id),d.handlingEvent=!1)}handleTodoPriorityChange(e){if(!d.handlingEvent){d.handlingEvent=!0;var t=e.querySelector(".priority");this._interstruct.changePriority(e.id,parseInt(t.value,10)),d.handlingEvent=!1}}handleTodoTitleChange(e){if(!d.handlingEvent){d.handlingEvent=!0;var t=e.querySelector(".title");this._interstruct.changeTitle(e.id,t.value),d.handlingEvent=!1}}handleTodoDueDateChange(e){if(!d.handlingEvent){d.handlingEvent=!0;var t=e.querySelector(".due_date").valueAsDate;if(null!=t)var i=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());else i=null;this._interstruct.changeDueDate(e.id,i),d.handlingEvent=!1}}handleTodoDeleteClick(e){d.handlingEvent||(d.handlingEvent=!0,this._interstruct.delete(e.id),d.handlingEvent=!1)}handleTodoDescriptionChange(e){if(!d.handlingEvent){d.handlingEvent=!0;var t=e.querySelector(".description");this._interstruct.changeDescription(e.id,t.value),d.handlingEvent=!1}}handleTodoDropdownClick(e){d.handlingEvent||(d.handlingEvent=!0,this.toggleCollapsable(e.id),d.handlingEvent=!1)}}d.main,d.projectControl,d.messageHeadline,d.projectSortBar,d.projectList,d.list={},d._initialized=!1,d.handlingEvent=!1,d.uninitializedError=new Error("Display has not been initialized yet."),d.rootElementNotFoundError=new Error("Root element could not be found."),d.listEmptyError=new Error("Display list is empty."),d.todoError=new Error("TODO: Display Class/Module"),window.addEventListener("load",d.initialize),window.addEventListener("load",n.loadData)}]);